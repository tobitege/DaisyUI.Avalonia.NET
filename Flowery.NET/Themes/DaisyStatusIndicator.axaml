<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Flowery.Controls;assembly=Flowery.NET">

    <Design.PreviewWith>
        <Border Padding="20" Background="#333">
            <StackPanel Spacing="20">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <controls:DaisyStatusIndicator Size="ExtraSmall" />
                    <controls:DaisyStatusIndicator Size="Small" />
                    <controls:DaisyStatusIndicator Size="Medium" />
                    <controls:DaisyStatusIndicator Size="Large" />
                    <controls:DaisyStatusIndicator Size="ExtraLarge" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <controls:DaisyStatusIndicator Color="Primary" />
                    <controls:DaisyStatusIndicator Color="Secondary" />
                    <controls:DaisyStatusIndicator Color="Accent" />
                    <controls:DaisyStatusIndicator Color="Neutral" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <controls:DaisyStatusIndicator Color="Info" />
                    <controls:DaisyStatusIndicator Color="Success" />
                    <controls:DaisyStatusIndicator Color="Warning" />
                    <controls:DaisyStatusIndicator Color="Error" />
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <controls:DaisyStatusIndicator Color="Error" IsPing="True" />
                    <controls:DaisyStatusIndicator Color="Info" IsBounce="True" />
                </StackPanel>
            </StackPanel>
        </Border>
    </Design.PreviewWith>

    <ControlTheme x:Key="{x:Type controls:DaisyStatusIndicator}" TargetType="controls:DaisyStatusIndicator">
        <!-- Default size: Medium (12px) -->
        <Setter Property="Width" Value="12" />
        <Setter Property="Height" Value="12" />
        <Setter Property="Background" Value="{DynamicResource DaisyNeutralBrush}" />

        <Setter Property="Template">
            <ControlTemplate>
                <Grid>
                    <!-- Ping animation ellipse (behind main dot) -->
                    <Ellipse Name="PART_PingEllipse"
                             Width="{TemplateBinding Width}"
                             Height="{TemplateBinding Height}"
                             Fill="{TemplateBinding Background}"
                             IsVisible="False" />
                    <!-- Main status dot -->
                    <Ellipse Name="PART_MainEllipse"
                             Width="{TemplateBinding Width}"
                             Height="{TemplateBinding Height}"
                             Fill="{TemplateBinding Background}" />
                </Grid>
            </ControlTemplate>
        </Setter>

        <!-- Sizes -->
        <Style Selector="^[Size=ExtraSmall]">
            <Setter Property="Width" Value="6" />
            <Setter Property="Height" Value="6" />
        </Style>
        <Style Selector="^[Size=Small]">
            <Setter Property="Width" Value="8" />
            <Setter Property="Height" Value="8" />
        </Style>
        <Style Selector="^[Size=Medium]">
            <Setter Property="Width" Value="12" />
            <Setter Property="Height" Value="12" />
        </Style>
        <Style Selector="^[Size=Large]">
            <Setter Property="Width" Value="16" />
            <Setter Property="Height" Value="16" />
        </Style>
        <Style Selector="^[Size=ExtraLarge]">
            <Setter Property="Width" Value="20" />
            <Setter Property="Height" Value="20" />
        </Style>

        <!-- Colors -->
        <Style Selector="^[Color=Neutral]">
            <Setter Property="Background" Value="{DynamicResource DaisyNeutralBrush}" />
        </Style>
        <Style Selector="^[Color=Primary]">
            <Setter Property="Background" Value="{DynamicResource DaisyPrimaryBrush}" />
        </Style>
        <Style Selector="^[Color=Secondary]">
            <Setter Property="Background" Value="{DynamicResource DaisySecondaryBrush}" />
        </Style>
        <Style Selector="^[Color=Accent]">
            <Setter Property="Background" Value="{DynamicResource DaisyAccentBrush}" />
        </Style>
        <Style Selector="^[Color=Info]">
            <Setter Property="Background" Value="{DynamicResource DaisyInfoBrush}" />
        </Style>
        <Style Selector="^[Color=Success]">
            <Setter Property="Background" Value="{DynamicResource DaisySuccessBrush}" />
        </Style>
        <Style Selector="^[Color=Warning]">
            <Setter Property="Background" Value="{DynamicResource DaisyWarningBrush}" />
        </Style>
        <Style Selector="^[Color=Error]">
            <Setter Property="Background" Value="{DynamicResource DaisyErrorBrush}" />
        </Style>

        <!-- Ping Animation -->
        <Style Selector="^[IsPing=True] /template/ Ellipse#PART_PingEllipse">
            <Setter Property="IsVisible" Value="True" />
            <Style.Animations>
                <Animation Duration="0:0:1" IterationCount="Infinite">
                    <KeyFrame KeyTime="0:0:0">
                        <Setter Property="Opacity" Value="0.75" />
                        <Setter Property="ScaleTransform.ScaleX" Value="1" />
                        <Setter Property="ScaleTransform.ScaleY" Value="1" />
                    </KeyFrame>
                    <KeyFrame KeyTime="0:0:1">
                        <Setter Property="Opacity" Value="0" />
                        <Setter Property="ScaleTransform.ScaleX" Value="2" />
                        <Setter Property="ScaleTransform.ScaleY" Value="2" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>

        <!-- Bounce Animation -->
        <Style Selector="^[IsBounce=True]">
            <Setter Property="ClipToBounds" Value="False" />
            <Setter Property="Margin" Value="0,6,0,0" />
        </Style>
        <Style Selector="^[IsBounce=True] /template/ Ellipse#PART_MainEllipse">
            <Style.Animations>
                <Animation Duration="0:0:0.5" IterationCount="Infinite">
                    <KeyFrame KeyTime="0:0:0">
                        <Setter Property="TranslateTransform.Y" Value="0" />
                    </KeyFrame>
                    <KeyFrame KeyTime="0:0:0.25">
                        <Setter Property="TranslateTransform.Y" Value="-6" />
                    </KeyFrame>
                    <KeyFrame KeyTime="0:0:0.5">
                        <Setter Property="TranslateTransform.Y" Value="0" />
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </ControlTheme>
</ResourceDictionary>
