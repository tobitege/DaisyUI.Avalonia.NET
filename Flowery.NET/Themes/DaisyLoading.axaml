<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Flowery.Controls;assembly=Flowery.NET">

    <Design.PreviewWith>
        <Border Padding="20">
             <StackPanel Spacing="20" Orientation="Horizontal">
                 <controls:DaisyLoading Variant="Spinner" />
                 <controls:DaisyLoading Variant="Dots" Foreground="Blue" />
                 <controls:DaisyLoading Variant="Ring" Size="Large" />
             </StackPanel>
        </Border>
    </Design.PreviewWith>

    <ControlTheme x:Key="{x:Type controls:DaisyLoading}" TargetType="controls:DaisyLoading">
        <Setter Property="Width" Value="24" />
        <Setter Property="Height" Value="24" />
        <Setter Property="Foreground" Value="{DynamicResource DaisyBaseContentBrush}" />

        <!-- Default Template (Spinner) -->
        <Setter Property="Template">
            <ControlTemplate>
                <!-- We apply a class 'spinning' to the Arc to style it -->
                <Arc Name="PART_Arc"
                     Classes="spinning"
                     Width="{TemplateBinding Width}"
                     Height="{TemplateBinding Height}"
                     StartAngle="0"
                     SweepAngle="270"
                     Stroke="{TemplateBinding Foreground}"
                     StrokeThickness="3"
                     StrokeLineCap="Round"/>
            </ControlTemplate>
        </Setter>

        <!-- Default Spinning Animation -->
        <Style Selector="^ /template/ Arc.spinning">
             <Style.Animations>
                 <Animation Duration="0:0:1" IterationCount="Infinite">
                     <KeyFrame KeyTime="0:0:1">
                         <Setter Property="RotateTransform.Angle" Value="360" />
                     </KeyFrame>
                 </Animation>
             </Style.Animations>
        </Style>

        <!-- Variants -->

        <!-- Dots -->
        <Style Selector="^[Variant=Dots]">
             <Setter Property="Template">
                 <ControlTemplate>
                     <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center" VerticalAlignment="Center">
                         <Ellipse Classes="dot1" Width="6" Height="6" Fill="{TemplateBinding Foreground}" Opacity="0.2" />
                         <Ellipse Classes="dot2" Width="6" Height="6" Fill="{TemplateBinding Foreground}" Opacity="0.2" />
                         <Ellipse Classes="dot3" Width="6" Height="6" Fill="{TemplateBinding Foreground}" Opacity="0.2" />
                     </StackPanel>
                 </ControlTemplate>
             </Setter>
        </Style>

        <!-- Dot Animations -->
        <Style Selector="^[Variant=Dots] /template/ Ellipse.dot1">
             <Style.Animations>
                 <Animation Duration="0:0:1" IterationCount="Infinite">
                     <KeyFrame KeyTime="0:0:0"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:0.3"><Setter Property="Opacity" Value="1"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:1"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                 </Animation>
             </Style.Animations>
        </Style>
        <Style Selector="^[Variant=Dots] /template/ Ellipse.dot2">
             <Style.Animations>
                 <Animation Duration="0:0:1" IterationCount="Infinite" Delay="0:0:0.2">
                     <KeyFrame KeyTime="0:0:0"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:0.3"><Setter Property="Opacity" Value="1"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:1"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                 </Animation>
             </Style.Animations>
        </Style>
        <Style Selector="^[Variant=Dots] /template/ Ellipse.dot3">
             <Style.Animations>
                 <Animation Duration="0:0:1" IterationCount="Infinite" Delay="0:0:0.4">
                     <KeyFrame KeyTime="0:0:0"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:0.3"><Setter Property="Opacity" Value="1"/></KeyFrame>
                     <KeyFrame KeyTime="0:0:1"><Setter Property="Opacity" Value="0.2"/></KeyFrame>
                 </Animation>
             </Style.Animations>
        </Style>

        <!-- Ring -->
        <Style Selector="^[Variant=Ring]">
             <Setter Property="Template">
                 <ControlTemplate>
                     <Arc Classes="spinning"
                          Width="{TemplateBinding Width}"
                          Height="{TemplateBinding Height}"
                          StartAngle="0"
                          SweepAngle="300"
                          Stroke="{TemplateBinding Foreground}"
                          StrokeThickness="2" />
                 </ControlTemplate>
             </Setter>
        </Style>
        <!-- Ring reuses spinning animation via class -->

        <!-- Sizes -->
        <Style Selector="^[Size=Large]">
            <Setter Property="Width" Value="48" />
            <Setter Property="Height" Value="48" />
        </Style>
        <Style Selector="^[Size=Small]">
            <Setter Property="Width" Value="16" />
            <Setter Property="Height" Value="16" />
        </Style>
        <Style Selector="^[Size=ExtraSmall]">
            <Setter Property="Width" Value="12" />
            <Setter Property="Height" Value="12" />
        </Style>

    </ControlTheme>
</ResourceDictionary>
