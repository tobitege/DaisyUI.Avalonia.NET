<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:custom="clr-namespace:Flowery.Controls.Custom;assembly=Flowery.NET">

    <Design.PreviewWith>
        <Border Padding="20" Background="#2a2a3a">
            <custom:DaisyModifierKeys />
        </Border>
    </Design.PreviewWith>

    <!-- Modifier Key Icons -->
    <StreamGeometry x:Key="ModifierIconShift">M15,18V12H17.17L12,6.83L6.83,12H9V18H15M12,4L22,14H17V20H7V14H2L12,4Z</StreamGeometry>
    <StreamGeometry x:Key="ModifierIconCtrl">M12,2A10,10,0,1,0,22,12A10,10,0,0,0,12,2M8,8H10.5V10H8V14H10.5V16H8A2,2,0,0,1,6,14V10A2,2,0,0,1,8,8M18,10V14A2,2,0,0,1,16,16H13.5V14H16V10H13.5V8H16A2,2,0,0,1,18,10Z</StreamGeometry>
    <StreamGeometry x:Key="ModifierIconAlt">M12,2A10,10,0,1,0,22,12A10,10,0,0,0,12,2M6.5,9H9L10.5,15H8L7.75,13.5H6.25L6,15H3.5L5,9H6.5M7,10.5L6.5,12.5H7.5L7,10.5M11,9H13.5L14.5,12L15.5,9H18L16,15H13L11,9Z</StreamGeometry>
    <StreamGeometry x:Key="ModifierIconCapsLock">M12,2L6,8H9V14H15V8H18L12,2M15,16H9V18H15V16Z</StreamGeometry>
    <!-- Numpad grid: 3x3 dots representing number keys -->
    <StreamGeometry x:Key="ModifierIconNumLock">M5,4A2,2,0,1,1,3,6A2,2,0,0,1,5,4M12,4A2,2,0,1,1,10,6A2,2,0,0,1,12,4M19,4A2,2,0,1,1,17,6A2,2,0,0,1,19,4M5,11A2,2,0,1,1,3,13A2,2,0,0,1,5,11M12,11A2,2,0,1,1,10,13A2,2,0,0,1,12,11M19,11A2,2,0,1,1,17,13A2,2,0,0,1,19,11M5,18A2,2,0,1,1,3,20A2,2,0,0,1,5,18M12,18A2,2,0,1,1,10,20A2,2,0,0,1,12,18M19,18A2,2,0,1,1,17,20A2,2,0,0,1,19,18Z</StreamGeometry>
    <StreamGeometry x:Key="ModifierIconScrollLock">M12,2L6,8H9V16H6L12,22L18,16H15V8H18L12,2Z</StreamGeometry>

    <ControlTheme x:Key="{x:Type custom:DaisyModifierKeys}" TargetType="custom:DaisyModifierKeys">
        <Setter Property="Template">
            <ControlTemplate>
                <StackPanel Orientation="Horizontal" Spacing="4">
                    <!-- Shift -->
                    <Border Name="ShiftKey"
                            IsVisible="{TemplateBinding ShowShift}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconShift}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="â‡§" FontSize="10" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>

                    <!-- Ctrl -->
                    <Border Name="CtrlKey"
                            IsVisible="{TemplateBinding ShowCtrl}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconCtrl}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="Ctrl" FontSize="10" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>

                    <!-- Alt -->
                    <Border Name="AltKey"
                            IsVisible="{TemplateBinding ShowAlt}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconAlt}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="Alt" FontSize="10" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>

                    <!-- Separator -->
                    <Border Width="1" Height="20" Background="{DynamicResource DaisyBase300Brush}" Margin="4,0"
                            IsVisible="{Binding $parent[custom:DaisyModifierKeys].ShowCapsLock}" />

                    <!-- Caps Lock -->
                    <Border Name="CapsLockKey"
                            IsVisible="{TemplateBinding ShowCapsLock}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconCapsLock}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="A" FontSize="10" FontWeight="Bold" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>

                    <!-- Num Lock -->
                    <Border Name="NumLockKey"
                            IsVisible="{TemplateBinding ShowNumLock}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconNumLock}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="123" FontSize="9" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>

                    <!-- Scroll Lock -->
                    <Border Name="ScrollLockKey"
                            IsVisible="{TemplateBinding ShowScrollLock}"
                            Background="{DynamicResource DaisyBase200Brush}"
                            BorderBrush="{DynamicResource DaisyBase300Brush}"
                            BorderThickness="1,1,1,2"
                            CornerRadius="4"
                            Padding="6,4"
                            MinWidth="40">
                        <StackPanel Orientation="Horizontal" Spacing="4" HorizontalAlignment="Center">
                            <PathIcon Data="{StaticResource ModifierIconScrollLock}"
                                      Width="14" Height="14"
                                      Foreground="{DynamicResource DaisyBaseContentBrush}" />
                            <TextBlock Text="Scr" FontSize="10" VerticalAlignment="Center"
                                       Foreground="{DynamicResource DaisyBaseContentBrush}" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ControlTemplate>
        </Setter>

        <!-- Pressed/Active states for modifier keys -->
        <Style Selector="^[IsShiftPressed=True] /template/ Border#ShiftKey">
            <Setter Property="Background" Value="{DynamicResource DaisyPrimaryBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyPrimaryBrush}" />
        </Style>
        <Style Selector="^[IsShiftPressed=True] /template/ Border#ShiftKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>
        <Style Selector="^[IsShiftPressed=True] /template/ Border#ShiftKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>

        <Style Selector="^[IsCtrlPressed=True] /template/ Border#CtrlKey">
            <Setter Property="Background" Value="{DynamicResource DaisyPrimaryBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyPrimaryBrush}" />
        </Style>
        <Style Selector="^[IsCtrlPressed=True] /template/ Border#CtrlKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>
        <Style Selector="^[IsCtrlPressed=True] /template/ Border#CtrlKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>

        <Style Selector="^[IsAltPressed=True] /template/ Border#AltKey">
            <Setter Property="Background" Value="{DynamicResource DaisyPrimaryBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyPrimaryBrush}" />
        </Style>
        <Style Selector="^[IsAltPressed=True] /template/ Border#AltKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>
        <Style Selector="^[IsAltPressed=True] /template/ Border#AltKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyPrimaryContentBrush}" />
        </Style>

        <!-- Lock key ON states (use Accent color to differentiate from pressed modifiers) -->
        <Style Selector="^[IsCapsLockOn=True] /template/ Border#CapsLockKey">
            <Setter Property="Background" Value="{DynamicResource DaisyAccentBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyAccentBrush}" />
        </Style>
        <Style Selector="^[IsCapsLockOn=True] /template/ Border#CapsLockKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>
        <Style Selector="^[IsCapsLockOn=True] /template/ Border#CapsLockKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>

        <Style Selector="^[IsNumLockOn=True] /template/ Border#NumLockKey">
            <Setter Property="Background" Value="{DynamicResource DaisyAccentBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyAccentBrush}" />
        </Style>
        <Style Selector="^[IsNumLockOn=True] /template/ Border#NumLockKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>
        <Style Selector="^[IsNumLockOn=True] /template/ Border#NumLockKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>

        <Style Selector="^[IsScrollLockOn=True] /template/ Border#ScrollLockKey">
            <Setter Property="Background" Value="{DynamicResource DaisyAccentBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource DaisyAccentBrush}" />
        </Style>
        <Style Selector="^[IsScrollLockOn=True] /template/ Border#ScrollLockKey PathIcon">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>
        <Style Selector="^[IsScrollLockOn=True] /template/ Border#ScrollLockKey TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource DaisyAccentContentBrush}" />
        </Style>
    </ControlTheme>
</ResourceDictionary>
